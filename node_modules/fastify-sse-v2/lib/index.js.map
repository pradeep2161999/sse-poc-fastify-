{"version":3,"sources":["../src/index.ts"],"names":["FastifySSEPlugin","plugin","name","fastify"],"mappings":";;;;;;;AAAA;;AAEA;;;;AAEO,MAAMA,gBAAgB,GAAG,4BAAcC,cAAd,EAAsB;AACpDC,EAAAA,IAAI,EAAE,gBAD8C;AAEpDC,EAAAA,OAAO,EAAE;AAF2C,CAAtB,CAAzB;;eAKQH,gB","sourcesContent":["import fastifyPlugin from \"fastify-plugin\";\nimport {Pushable} from \"it-pushable\";\nimport {plugin} from \"./plugin\";\n\nexport const FastifySSEPlugin = fastifyPlugin(plugin, {\n  name: \"fastify-sse-v2\",\n  fastify: \">=3\",\n});\n\nexport default FastifySSEPlugin;\n\ndeclare module \"fastify\" {\n\n  interface EventMessage {\n    /**\n     * Message payload\n     */\n    data?: string;\n\n    /**\n     * Message identifier, if set, client will send `Last-Event-ID: <id>` header on reconnect\n     */\n    id?: string;\n\n    /**\n     * Message type\n     */\n    event?: string;\n\n    /**\n     * Update client reconnect interval (how long will client wait before trying to reconnect).\n     */\n    retry?: number;\n  }\n\n  interface FastifyReply {\n    sseContext: {source: Pushable<EventMessage>};\n    sse(source: AsyncIterable<EventMessage> | EventMessage): void;\n  }\n}\n\n//seems like fastify removed EventMessage in recent release so this is replacement for that\nexport interface EventMessage {\n  /**\n   * Message payload\n   */\n  data?: string;\n\n  /**\n   * Message identifier, if set, client will send `Last-Event-ID: <id>` header on reconnect\n   */\n  id?: string;\n\n  /**\n   * Message type\n   */\n  event?: string;\n\n  /**\n   * Update client reconnect interval (how long will client wait before trying to reconnect).\n   */\n  retry?: number;\n}"],"file":"index.js"}